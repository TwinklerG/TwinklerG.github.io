# 运算方法和运算部件

## 补码加法运算部件

### 补码加减法的实现

#### 利用补码

补码加法：[X＋Y]补 = [X]补＋ [Y]补

- 和的补码 = 补码的和

补码减法：[X−Y]补 = [X]补 − [Y]补 = [X]补＋ [−Y]补

- 差的补码 = 补码的差

- 减法变加法，关键是求[−Y]补

求补公式：[−Y]补= [ [Y]补 ]补

- 对[Y]补取反，再在最低位加1

#### 有符号数的溢出检测

1. 溢出的一种判断逻辑：正正得负 OR 负负得正

   设两数符号位为$f_0$ $f_1$ ，和数的符号位为 $f_s$

   定义一个溢出检测的信号位 Overflow(OF)

$$
Overflow = \overline{f_0}\overline{f_1}f_s + f_0f_1\overline{f_s}
$$

2. 有符号数溢出的另一种判断逻辑

   设两数最高数值位产生的进位位$C_n$ ，符号位进位位$C_f$

   定义一个溢出检测的信号位 Overflow(OF)
   $$
   Overflow = C_f\oplus C_n
   $$

   > $\oplus$ 为异或

#### 带进位位的一位全加法器

![带进位位的一位全加法器](.\img\带进位位的一位全加法器.png)

和数$S_i = X_i\oplus Y_i\oplus C_i$

进位$C_{i1} = X_iY_i + (X_i\oplus Y_i)C_i$

 ![](C:\Users\Twinkler\Desktop\计算系统基础\img\带进位位的一位全加法器的真值表.png)

n位的加法运算部件

* 可由n个带有进位的全加法器实现

  做法：

  * 将n个一位的全加器串连
  * 低位进位输出连接到高位进位输入

#### 行波进位加法器

* 可由n个带有进位的全加法器实现

![](./img/行波进位加法器.png)

* 无符号数的溢出判断

  * 设减法操作的指示位为SUB，最高位产生的进位为$C_{out}$

    定义一个溢出检测的信号位 Unsigned Overflow(UOF)
    $$
    UOF = SUB\oplus C_{out}
    $$
    

![](./img/无符号数的加减法溢出.png)

* 补码的减法转变为加法

  * 问题关键在如何求减数的补码，$[-Y]_补$

    做法：将$[Y]_补$连同符号位一起逐位取反末位加一

    $[-Y]_补=[[Y]_补]_补$

    > 注意补码区间不对称：一半是负，一个为0，其他为正

* 引入运算控制位 Sub

  * Sub = 0时作加法，送入加法器的是$Y_补$

  * Sub = 1时作减法，送入加法器的是$[-Y]_补$

    * 对$Y_补$逐位取反，末位加一
      $$
      Input = Y_i\oplus Sub
      $$

![](./img/可加减的行波进位加法器.png)

* 补码加减法实现总结
  * 加法器不区分符号数和无符号数
  * 输入n位操作数，加法器取计算的低n位结果，并生成标志位信息
  * 存放运算标志的寄存器称为**程序/状态字**或**标志寄存器**
  * 每个标志对应标志寄存器中的一个标志位

#### 门级延迟

采用**先行进位电路**来降低延迟

## 补码乘法运算部件

#### 原码乘法的运算方法

符号单独运算：直接异或

绝对值相乘：仅需考虑数值部分的计算

![](./img/原码乘法.png)

* 一位乘法逻辑实现

  R = X * Y

  * 1 * 1 = 1
  * 1 * 0 = 0
  * 0 * 1 = 0
  * 0 * 0 = 0

  用与门可以实现一位乘法逻辑

* 对于两个4位二进制组合来说

  * 乘法需要25个与门

    一级门延迟，生成所有相加数

* 横向进位无符号阵列乘法

  n*(n-1)个全加器

  [n+2(n-2)]*6T+T

![](./img/横向无符号阵列乘法.png)

* 斜向进位无符号阵列乘法

  n*(n-1)个全加器

  [2(n-1)]*6T+T

![](./img/斜向进位无符号阵列乘法.png)

最高位f位为符号位

![原码乘法的运算方法](./img/原码乘法的运算方法.png)

**补码乘法器**

* n位数值的补码乘法器
* 最高位f位为符号位

![](./img/补码乘法器.png)

> 阵列乘法器的时延优化
>
> * 布斯两位乘法
> * 华莱士树
> * 乘法流水线

# [回到首页](./index.html)
